{% extends "layout.html" %}
{% block body %}
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["table"]});
      google.setOnLoadCallback(drawTable);

      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Provided Service');
        data.addColumn('string', 'Date');
        data.addColumn('number', 'Service Fee');
        data.addColumn('string', 'Description');


        {% for service in result['provided_services'] %}
        data.addRows([
          [
          "{{service['provided_service']}}",  "{{service['service_date']}}", {{service['service_fee']}}, "{{service['description']}}",
          
          ],
        ]);
        {% endfor %}
        var table = new google.visualization.Table(document.getElementById('table_div'));

        table.draw(data, {showRowNumber: true});
      };
      
    </script>
    <script type="text/javascript">
        $(document).ready(function(){

            $('.service-date-picker').datepicker({
                autoclose: true,
                todayHighlight: true,
                format: 'dd/mm/yyyy',
            });
      });
    </script>
<section>
	<div class="container" align="center">

		<div>
	      <a href="#" data-original-title="Add service" data-toggle="modal" data-target="#add-service-form-modal" data-backdrop="false" type="button" class="btn btn-sm btn-primary">Add Service</a>
	  	</div>

        <br></br>

		<div id="table_div"></div>
	</div>
</section>

<!-- modal to add new service -->
    <div class="portfolio-modal modal fade" id="add-service-form-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="modal-body">                            
                    <h4>Add new service by filling the fields below</h4>
                    <br></br>
                    <form class="form-horizontal" method="post" action="{{url_for('services.edit_service')}}">
                    	<input type="hidden" id="costumer_id" name="costumer_id" value="{{result['_id']}}">
                    	<div class="form-group col-xs-offset-3 col-xs-9">
                    		<div class="col-xs-6">
                        		<label class="control-label pull-right" for="providedService">Provided Service:</label>
                        	</div>
                        	<div class="col-xs-6">
                                <select class="form-control col-xs-6" id="providedService" name="providedService">
                                  <option value="Phone calls">Phone calls</option>
                                  <option value="E-mail">E-mail</option>
                                  <option value="Face-to-face meeting">Face-to-face meeting</option>
                                </select> 
                        	</div>
                    	</div>
                    	<div class="form-group col-xs-offset-3 col-xs-9">
                    		<div class="col-xs-6">
                        		<label for="date" class="control-label pull-right">Date:</label>
                        	</div>
                        	<div class="col-xs-6">
                        		<input id="date" name="date" class="form-control service-date-picker" type="text">
                        	</div>
                        </div>
                        <div class="form-group col-xs-offset-3 col-xs-9">
                            <div class="col-xs-6">
                                <label for="fee" class="control-label pull-right">Service Fee:</label>
                            </div>
                            <div class="col-xs-6">
                                <input id="fee" name="fee" class="form-control" type="integer">
                            </div>
                        </div>
                    	<div class="form-group col-xs-offset-3 col-xs-9">
                    		<div class="col-xs-6">
                    			<label for="description" class="control-label pull-right">Description:</label>
                    		</div>
                    		<div class="col-xs-6">
                    			<textarea rows="4" id="description" name="description" class="form-control" ></textarea>
                    		</div>
                    	</div>
                    	<br>
                    	</br>
                        <div class="form-group col-xs-12" >
        				    <button type="submit" class="col-xs-offset-1 btn btn-primary">Save Service</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}